	ORG 0
	MOVE 10000, SP
	MOVE 0, R2

FOR LOADH R1, (R2 + INPUT)
		ADD R2, 2, R2
		LOADH R3, (R2 + INPUT)

		AND R1, 8000, R4
		CMP R4, 8000
		JP_NE IS_NEG

		LOAD R4, (MASK)
	  OR R1, R4, R1
IS_NEG

		AND R3, 8000, R4
		CMP R4, 8000
		JP_NE IS_NEG_R3

		LOAD R4, (MASK)
	  OR R3, R4, R3
IS_NEG_R3

		CMP R1, R3
		JP_EQ CHECK_END

CONTINUE PUSH R1
				 PUSH R3

		CALL COMP
		ADD R2, 2, R2

		STORE R0, (R2 + 0FFC)
	  JP FOR

CHECK_END LOAD R4, (MASK2) 
				  CMP R1, R4
					JP_NE CONTINUE

END HALT

INPUT DH 4321, 432C, FF, 7DBA, 548B, B78B, BADA, DEDA, 7C8A, 1B39, 8000, 8000
MASK DW %H FFFF 0000
MASK2 DW %H FFFF 8000

ORG 500

COMP LOAD R1, (SP + 4)
		 LOAD R3, (SP + 8)

		 MOVE 0, R0
		 MOVE 4, R4

LOOP AND R1, 0FF, R5
		 AND R3, 0FF, R6

		 CMP R5, R6 
		 JP_EQ ADD_A 

		 OR R0, 0BB, R0

END_LOOP
		 ROTR R0, 8, R0
		 SHR R1, 8, R1
		 SHR R3, 8, R3

		 SUB R4, 1, R4
		 CMP R4, 0
		 JP_NE LOOP

		 RET

ADD_A OR R0, 0AA, R0
			JP END_LOOP

